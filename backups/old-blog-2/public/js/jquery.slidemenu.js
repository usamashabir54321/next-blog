(function($){"use strict";$.fn.spasticNav=function(options){options=$.extend({overlap:0,speed:500,reset:50,color:'#00c6ff',easing:'swing'},options);return this.each(function(){var nav=$(this),currentPageItem=nav.find('>.current-menu-item,>.current-menu-parent,>.current-menu-ancestor'),hidden=true,blob,reset;if(currentPageItem.length===0){currentPageItem=nav.find('li').eq(0);}
$('<li id="blob"></li>').css({width:currentPageItem.css('width'),height:currentPageItem.css('height'),left:currentPageItem.position().left,top:currentPageItem.position().top-options.overlap/2,backgroundColor:hidden?options.color:currentPageItem.find('a').css('backgroundColor'),opacity:hidden?0:1}).appendTo(this);blob=$('#blob',nav);nav.find('>li:not(#blob)').hover(function(){clearTimeout(reset);var bg=$(this).css('backgroundColor');$(this).addClass('blob_over');blob.css({backgroundColor:bg}).animate({left:$(this).position().left,top:$(this).position().top-options.overlap/2,width:$(this).css('width'),height:$(this).css('height')+options.overlap,opacity:1},{duration:options.speed,easing:options.easing,queue:false});},function(){reset=setTimeout(function(){blob.animate({opacity:0},options.speed)},options.reset);$(this).removeClass('blob_over');});});};})(jQuery);